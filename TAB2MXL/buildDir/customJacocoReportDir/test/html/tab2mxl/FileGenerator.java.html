<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FileGenerator.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">TAB2MXL</a> &gt; <a href="index.source.html" class="el_package">tab2mxl</a> &gt; <span class="el_source">FileGenerator.java</span></div><h1>FileGenerator.java</h1><pre class="source lang-java linenums">package tab2mxl;

import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.prefs.Preferences;

import javax.swing.JFileChooser;
import javax.swing.filechooser.FileNameExtensionFilter;

public class FileGenerator {

<span class="fc" id="L14">	public Preferences prefs = Preferences.userRoot().node(getClass().getName());</span>
<span class="fc" id="L15">	public String LAST_USED_FOLDER_CONVERT = &quot;&quot;;</span>
	
	
<span class="fc" id="L18">	public boolean failed = false;</span>
<span class="fc" id="L19">	static int measureNum = 0;</span>
	File saveFile;
	FileWriter myWriter;
	static String filepath;
	
<span class="fc" id="L24">	String currentIndent = &quot;&quot;;</span>
<span class="fc" id="L25">	boolean measureOpen = false;</span>
<span class="fc" id="L26">	boolean partOpen = false;</span>
	
<span class="fc" id="L28">	FileGenerator (String path) {	</span>
<span class="fc" id="L29">		failed = false;</span>
		
<span class="fc" id="L31">		JFileChooser fileChooser = null;</span>
<span class="fc" id="L32">		int response = 0;</span>
<span class="pc bpc" id="L33" title="1 of 2 branches missed.">		if(path == &quot;&quot;)</span>
		{
<span class="nc" id="L35">			fileChooser = new JFileChooser(prefs.get(LAST_USED_FOLDER_CONVERT, new File(&quot;.&quot;).getAbsolutePath())); // Create file chooser</span>
<span class="nc" id="L36">			fileChooser.setFileFilter(new FileNameExtensionFilter(&quot;music xml&quot;,&quot;musicxml&quot;,&quot;mxl&quot;));</span>
<span class="nc" id="L37">			response = fileChooser.showSaveDialog(null); //Select file to save</span>
		}		
		
<span class="pc bpc" id="L40" title="1 of 2 branches missed.">		if (response == JFileChooser.APPROVE_OPTION) { // if File successively chosen</span>
						
<span class="pc bpc" id="L42" title="1 of 2 branches missed.">			if(path == &quot;&quot;) {</span>
<span class="nc" id="L43">				prefs.put(LAST_USED_FOLDER_CONVERT, fileChooser.getSelectedFile().getParent()); // Save file path</span>
<span class="nc" id="L44">				filepath = fileChooser.getSelectedFile().getAbsolutePath();</span>
<span class="nc bnc" id="L45" title="All 4 branches missed.">				if (!filepath.substring(filepath.lastIndexOf(&quot;.&quot;)+1).equals(&quot;musicxml&quot;) &amp;&amp; !filepath.substring(filepath.lastIndexOf(&quot;.&quot;)+1).equals(&quot;mxl&quot;))     </span>
<span class="nc" id="L46">					filepath += &quot;.musicxml&quot;; //Add extension to file if not already added</span>
<span class="nc" id="L47">				saveFile = new File(filepath);</span>
			}
			else {
<span class="fc" id="L50">				filepath= path;</span>
<span class="fc" id="L51">				saveFile = new File(filepath);</span>
			}
			
			try {
<span class="fc" id="L55">		      myWriter = new FileWriter(saveFile);</span>
		      
<span class="nc" id="L57">		    } catch (IOException e) {</span>
<span class="nc" id="L58">		      e.printStackTrace();</span>
<span class="pc" id="L59">		    }</span>
		}
		else // Canceled
		{
<span class="nc" id="L63">			failed = true;</span>
		}
<span class="fc" id="L65">	}</span>
	
	/**
	 * Goes to the next line in the MusicXML
	 */
	private void newLine()
	{
		try {
<span class="fc" id="L73">			myWriter.write(&quot;\n&quot;);</span>
<span class="nc" id="L74">		} catch (IOException e) {</span>
<span class="nc" id="L75">			e.printStackTrace();</span>
<span class="fc" id="L76">		}</span>
<span class="fc" id="L77">	}</span>
	
	private void tabBack()
	{
		try {
<span class="fc" id="L82">			currentIndent = currentIndent.substring(0,currentIndent.length() - 2);</span>
<span class="fc" id="L83">		} catch (StringIndexOutOfBoundsException e) {</span>
			//e.printStackTrace();
<span class="fc" id="L85">		}</span>
<span class="fc" id="L86">	}</span>
	
	/**
	 * Adds the initial info to the beginning of the MusicXML
	 * @param title
	 */
	public void addInfo(String title)
	{
		try {
<span class="fc" id="L95">			myWriter.write(currentIndent + &quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;&quot;);</span>
<span class="fc" id="L96">			newLine();</span>
<span class="fc" id="L97">			myWriter.write(currentIndent + &quot;&lt;score-partwise version=\&quot;3.1\&quot;&gt;&quot;);</span>
<span class="fc" id="L98">			currentIndent += &quot;  &quot;;</span>
<span class="fc" id="L99">			newLine();</span>
<span class="fc" id="L100">			myWriter.write(currentIndent + &quot;&lt;work&gt;&quot;);</span>
<span class="fc" id="L101">			currentIndent += &quot;  &quot;;</span>
<span class="fc" id="L102">			newLine();</span>
<span class="fc" id="L103">			myWriter.write(currentIndent + &quot;&lt;work-title&gt;&quot; + title + &quot;&lt;/work-title&gt;&quot;);</span>
<span class="fc" id="L104">			newLine();	</span>
<span class="fc" id="L105">			tabBack();</span>
<span class="fc" id="L106">			myWriter.write(currentIndent + &quot;&lt;/work&gt;&quot;);			</span>
<span class="fc" id="L107">			newLine();			</span>
<span class="fc" id="L108">			myWriter.write(currentIndent + &quot;&lt;part-list&gt;&quot;);</span>
<span class="fc" id="L109">			currentIndent += &quot;  &quot;;</span>
<span class="fc" id="L110">			newLine();</span>
<span class="fc" id="L111">			myWriter.write(currentIndent + &quot;&lt;score-part id=\&quot;P1\&quot;&gt;&quot;);</span>
<span class="fc" id="L112">			currentIndent += &quot;  &quot;;</span>
<span class="fc" id="L113">			newLine();</span>
<span class="fc" id="L114">			myWriter.write(currentIndent + &quot;&lt;part-name&gt;Guitar&lt;/part-name&gt;&quot;);</span>
<span class="fc" id="L115">			newLine();</span>
<span class="fc" id="L116">			tabBack();</span>
<span class="fc" id="L117">			myWriter.write(currentIndent + &quot;&lt;/score-part&gt;&quot;);			</span>
<span class="fc" id="L118">			newLine();</span>
<span class="fc" id="L119">			tabBack();</span>
<span class="fc" id="L120">			myWriter.write(currentIndent + &quot;&lt;/part-list&gt;&quot;);			</span>
<span class="fc" id="L121">			newLine();</span>
			
<span class="nc" id="L123">		} catch (IOException e) {</span>
<span class="nc" id="L124">			e.printStackTrace();</span>
<span class="fc" id="L125">		}</span>
<span class="fc" id="L126">	}</span>
	

	
	/**
	 * Adds a new part opening to the MusicXML
	 * @param partNumber
	 */
	public void openPart(int partNumber)
	{
		try {
<span class="fc" id="L137">			myWriter.write(currentIndent + &quot;&lt;part id=\&quot;P&quot; + partNumber + &quot;\&quot;&gt;&quot;);</span>
<span class="fc" id="L138">			currentIndent += &quot;  &quot;;</span>
<span class="fc" id="L139">			newLine();</span>
<span class="fc" id="L140">			partOpen = true;</span>
<span class="nc" id="L141">		} catch (IOException e) {</span>
<span class="nc" id="L142">			e.printStackTrace();</span>
<span class="fc" id="L143">		}</span>
<span class="fc" id="L144">	}</span>
	
	/**
	 * Adds a part closing to the MusicXML
	 */
	public void closePart()
	{
		try {
<span class="fc" id="L152">			tabBack();</span>
<span class="fc" id="L153">			myWriter.write(currentIndent + &quot;&lt;/part&gt;&quot;);</span>
<span class="fc" id="L154">			newLine();</span>
<span class="fc" id="L155">			partOpen = false;</span>
<span class="nc" id="L156">		} catch (IOException e) {</span>
<span class="nc" id="L157">			e.printStackTrace();</span>
<span class="fc" id="L158">		}</span>
<span class="fc" id="L159">	}</span>
	
	/**
	 * Adds attributes to the MusicXML
	 * @param division
	 * @param keySignature
	 * @param beat
	 * @param beatType
	 * @param clef
	 * @param tune
	 */
	public void attributes(int division, int keySignature, int beat, int beatType, String clef, String[] tune, int[] tuneOctave) {
		try {
<span class="fc" id="L172">			myWriter.write(currentIndent + &quot;&lt;attributes&gt;&quot;);</span>
<span class="fc" id="L173">			currentIndent += &quot;  &quot;;</span>
<span class="fc" id="L174">			newLine();</span>
<span class="fc" id="L175">			myWriter.write(currentIndent + &quot;&lt;divisions&gt;&quot;+division+&quot;&lt;/divisions&gt;&quot;);</span>
<span class="fc" id="L176">			newLine();</span>
<span class="fc" id="L177">			myWriter.write(currentIndent + &quot;&lt;key&gt;&quot;);</span>
<span class="fc" id="L178">			currentIndent += &quot;  &quot;;	</span>
<span class="fc" id="L179">			newLine();</span>
<span class="fc" id="L180">			myWriter.write(currentIndent + &quot;&lt;fifths&gt;&quot;+0+&quot;&lt;/fifths&gt;&quot;);</span>
<span class="fc" id="L181">			newLine();</span>
<span class="fc" id="L182">			myWriter.write(currentIndent + &quot;&lt;mode&gt;&quot;+&quot;major&quot;+&quot;&lt;/mode&gt;&quot;);			</span>
<span class="fc" id="L183">			newLine();</span>
<span class="fc" id="L184">			tabBack();</span>
<span class="fc" id="L185">			myWriter.write(currentIndent + &quot;&lt;/key&gt;&quot;);</span>
<span class="fc" id="L186">			newLine();</span>
<span class="fc" id="L187">			myWriter.write(currentIndent + &quot;&lt;time&gt;&quot;);</span>
<span class="fc" id="L188">			currentIndent += &quot;  &quot;;</span>
<span class="fc" id="L189">			newLine();</span>
<span class="fc" id="L190">			myWriter.write(currentIndent + &quot;&lt;beats&gt;&quot;+beat+&quot;&lt;/beats&gt;&quot;);</span>
<span class="fc" id="L191">			newLine();</span>
<span class="fc" id="L192">			myWriter.write(currentIndent + &quot;&lt;beat-type&gt;&quot;+beatType+&quot;&lt;/beat-type&gt;&quot;);			</span>
<span class="fc" id="L193">			newLine();</span>
<span class="fc" id="L194">			tabBack();</span>
<span class="fc" id="L195">			myWriter.write(currentIndent + &quot;&lt;/time&gt;&quot;);</span>
<span class="fc" id="L196">			newLine();</span>
			//myWriter.write(currentIndent + &quot;&lt;staves&gt;&quot; + 2 + &quot;&lt;/staves&gt;&quot;);
			//newLine();
<span class="fc" id="L199">			myWriter.write(currentIndent + &quot;&lt;clef&gt;&quot;);</span>
<span class="fc" id="L200">			currentIndent += &quot;  &quot;;</span>
<span class="fc" id="L201">			newLine();</span>
<span class="fc" id="L202">			myWriter.write(currentIndent + &quot;&lt;sign&gt;&quot;+clef+&quot;&lt;/sign&gt;&quot;);</span>
<span class="fc" id="L203">			newLine();</span>
<span class="fc" id="L204">			myWriter.write(currentIndent + &quot;&lt;line&gt;&quot;+2+&quot;&lt;/line&gt;&quot;);</span>
<span class="fc" id="L205">			newLine();</span>
<span class="fc" id="L206">			myWriter.write(currentIndent + &quot;&lt;clef-octave-change&gt;&quot;+(-1)+&quot;&lt;/clef-octave-change&gt;&quot;);</span>
<span class="fc" id="L207">			newLine();</span>
<span class="fc" id="L208">			tabBack();</span>
<span class="fc" id="L209">			myWriter.write(currentIndent + &quot;&lt;/clef&gt;&quot;);			</span>
<span class="fc" id="L210">			newLine();</span>
<span class="fc" id="L211">			myWriter.write(currentIndent + &quot;&lt;staff-details&gt;&quot;);</span>
<span class="fc" id="L212">			currentIndent += &quot;  &quot;;</span>
<span class="fc" id="L213">			newLine();</span>
<span class="fc" id="L214">			myWriter.write(currentIndent + &quot;&lt;staff-lines&gt;&quot; + tune.length + &quot;&lt;/staff-lines&gt;&quot;);</span>
<span class="fc" id="L215">			newLine();</span>
			
<span class="fc bfc" id="L217" title="All 2 branches covered.">			for(int i = 0; i &lt; tune.length; i++)</span>
			{
<span class="fc" id="L219">				myWriter.write(currentIndent + &quot;&lt;staff-tuning line=\&quot;&quot; + (i + 1) + &quot;\&quot;&gt;&quot;);</span>
<span class="fc" id="L220">				currentIndent += &quot;  &quot;;</span>
<span class="fc" id="L221">				newLine();</span>
<span class="fc" id="L222">				myWriter.write(currentIndent + &quot;&lt;tuning-step&gt;&quot; + tune[tune.length - i - 1].toUpperCase() + &quot;&lt;/tuning-step&gt;&quot;);</span>
<span class="fc" id="L223">				newLine();</span>
<span class="fc" id="L224">				myWriter.write(currentIndent + &quot;&lt;tuning-octave&gt;&quot; + tuneOctave[tuneOctave.length - i - 1] + &quot;&lt;/tuning-octave&gt;&quot;);</span>
<span class="fc" id="L225">				newLine();</span>
<span class="fc" id="L226">				tabBack();</span>
<span class="fc" id="L227">				myWriter.write(currentIndent + &quot;&lt;/staff-tuning&gt;&quot;);</span>
<span class="fc" id="L228">				newLine();</span>
			}
			
<span class="fc" id="L231">			tabBack();</span>
<span class="fc" id="L232">			myWriter.write(currentIndent + &quot;&lt;/staff-details&gt;&quot;);</span>
<span class="fc" id="L233">			newLine();</span>
			
<span class="fc" id="L235">			tabBack();</span>
<span class="fc" id="L236">			myWriter.write(currentIndent + &quot;&lt;/attributes&gt;&quot;);</span>
<span class="fc" id="L237">			newLine();</span>
			
<span class="nc" id="L239">		} catch (IOException e) {</span>
			// TODO Auto-generated catch block
<span class="nc" id="L241">			e.printStackTrace();</span>
<span class="fc" id="L242">		}</span>
		
<span class="fc" id="L244">	}</span>
	
	/**
	 * Adds a note to the MusicXML
	 * @param string
	 * @param fret
	 * @param note
	 */
	public void addNote(int string, int fret, char note, String noteType, int duration, int octave, int dot,boolean alter,boolean hammerStart, boolean hammerContinue, boolean hammerDone,boolean harmonic)
	{
		//if(measureNum &gt; 0) {
		try {
<span class="fc" id="L256">			myWriter.write(currentIndent + &quot;&lt;note&gt;&quot;);</span>
<span class="fc" id="L257">			currentIndent += &quot;  &quot;;</span>
<span class="fc" id="L258">			newLine();</span>
<span class="fc" id="L259">			myWriter.write(currentIndent + &quot;&lt;pitch&gt;&quot;);</span>
<span class="fc" id="L260">			currentIndent += &quot;  &quot;;</span>
<span class="fc" id="L261">			newLine();</span>
<span class="fc" id="L262">			myWriter.write(currentIndent + &quot;&lt;step&gt;&quot; + note + &quot;&lt;/step&gt;&quot;);</span>
<span class="fc" id="L263">			newLine();</span>
<span class="pc bpc" id="L264" title="1 of 2 branches missed.">			if (alter) {</span>
<span class="nc" id="L265">				myWriter.write(currentIndent + &quot;&lt;alter&gt;&quot; + 1 + &quot;&lt;/alter&gt;&quot;);</span>
<span class="nc" id="L266">				newLine();</span>
			}
<span class="fc" id="L268">			myWriter.write(currentIndent + &quot;&lt;octave&gt;&quot; + octave + &quot;&lt;/octave&gt;&quot;);</span>
<span class="fc" id="L269">			newLine();</span>
<span class="fc" id="L270">			tabBack();</span>
<span class="fc" id="L271">			myWriter.write(currentIndent + &quot;&lt;/pitch&gt;&quot;); </span>
<span class="fc" id="L272">			newLine();</span>
<span class="fc" id="L273">			myWriter.write(currentIndent + &quot;&lt;duration&gt;&quot; + duration + &quot;&lt;/duration&gt;&quot;); </span>
<span class="fc" id="L274">			newLine();</span>
<span class="fc" id="L275">			myWriter.write(currentIndent + &quot;&lt;type&gt;&quot; + noteType +&quot;&lt;/type&gt;&quot;); </span>
<span class="fc" id="L276">			newLine();</span>
<span class="pc bpc" id="L277" title="1 of 2 branches missed.">			for(int i  = 0; i &lt; dot; i++) {</span>
<span class="nc" id="L278">				myWriter.write(currentIndent + &quot;&lt;dot/&gt;&quot;);</span>
<span class="nc" id="L279">				newLine();</span>
			}
<span class="pc bpc" id="L281" title="1 of 2 branches missed.">			if(alter){</span>
<span class="nc" id="L282">				myWriter.write(currentIndent + &quot;&lt;accidental&gt;sharp&lt;/accidental&gt;&quot;);</span>
<span class="nc" id="L283">				newLine();</span>
			}
<span class="fc" id="L285">			myWriter.write(currentIndent + &quot;&lt;notations&gt;&quot;);</span>
<span class="fc" id="L286">			newLine();</span>
<span class="fc" id="L287">			currentIndent += &quot;  &quot;;</span>
<span class="fc" id="L288">			myWriter.write(currentIndent + &quot;&lt;technical&gt;&quot;);</span>
<span class="fc" id="L289">			currentIndent += &quot;  &quot;;</span>
<span class="fc" id="L290">			newLine();</span>
<span class="pc bpc" id="L291" title="1 of 2 branches missed.">			if(harmonic) {</span>
<span class="nc" id="L292">				myWriter.write(currentIndent + &quot;&lt;harmonic default-x=\&quot;3\&quot; default-y=\&quot;24\&quot; placement=\&quot;above\&quot; print-object=\&quot;yes\&quot;/&gt;&quot;);</span>
<span class="nc" id="L293">				newLine();</span>
			}
<span class="pc bpc" id="L295" title="1 of 2 branches missed.">			if(hammerStart){</span>
<span class="nc" id="L296">				myWriter.write(currentIndent + &quot;&lt;hammer-on number=\&quot;1\&quot; type=\&quot;start\&quot;&gt;H&lt;/hammer-on&gt;&quot;);</span>
<span class="nc" id="L297">				newLine();</span>
			}
<span class="pc bpc" id="L299" title="1 of 2 branches missed.">			else if(hammerContinue){</span>
<span class="nc" id="L300">				myWriter.write(currentIndent + &quot;&lt;hammer-on number=\&quot;1\&quot; type=\&quot;stop\&quot;/&gt;&quot;);</span>
<span class="nc" id="L301">				newLine();</span>
<span class="nc" id="L302">				myWriter.write(currentIndent + &quot;&lt;hammer-on number=\&quot;1\&quot; type=\&quot;start\&quot;&gt;H&lt;/hammer-on&gt;&quot;);</span>
<span class="nc" id="L303">				newLine();</span>
			}
<span class="pc bpc" id="L305" title="1 of 2 branches missed.">			else if(hammerDone){</span>
<span class="nc" id="L306">				myWriter.write(currentIndent + &quot;&lt;hammer-on number=\&quot;1\&quot; type=\&quot;stop\&quot;/&gt;&quot;);</span>
<span class="nc" id="L307">				newLine();</span>
			}
<span class="fc" id="L309">			myWriter.write(currentIndent + &quot;&lt;string&gt;&quot; + string + &quot;&lt;/string&gt;&quot;);</span>
<span class="fc" id="L310">			newLine();</span>
<span class="fc" id="L311">			myWriter.write(currentIndent + &quot;&lt;fret&gt;&quot; + fret + &quot;&lt;/fret&gt;&quot;);</span>
<span class="fc" id="L312">			newLine();</span>
<span class="fc" id="L313">			tabBack();</span>
<span class="fc" id="L314">			myWriter.write(currentIndent + &quot;&lt;/technical&gt;&quot;);</span>
<span class="fc" id="L315">			newLine();</span>
<span class="pc bpc" id="L316" title="1 of 2 branches missed.">			if(hammerStart){</span>
<span class="nc" id="L317">				myWriter.write(currentIndent + &quot;&lt;slur number=\&quot;1\&quot; placement=\&quot;above\&quot; type=\&quot;start\&quot;/&gt;&quot;);</span>
<span class="nc" id="L318">				newLine();</span>
			}
<span class="pc bpc" id="L320" title="1 of 2 branches missed.">			else if(hammerDone){</span>
<span class="nc" id="L321">				myWriter.write(currentIndent + &quot;&lt;slur number=\&quot;1\&quot; type=\&quot;stop\&quot;/&gt;&quot;);</span>
<span class="nc" id="L322">				newLine();</span>
			}
<span class="fc" id="L324">			tabBack();</span>
<span class="fc" id="L325">			myWriter.write(currentIndent + &quot;&lt;/notations&gt;&quot;);</span>
<span class="fc" id="L326">			newLine();</span>
<span class="fc" id="L327">			myWriter.write(currentIndent + &quot;&lt;stem&gt;down&lt;/stem&gt;&quot;); </span>
<span class="fc" id="L328">			newLine();</span>
<span class="fc" id="L329">			myWriter.write(currentIndent + &quot;&lt;staff&gt;1&lt;/staff&gt;&quot;);</span>
<span class="fc" id="L330">			newLine();</span>
<span class="fc" id="L331">			tabBack();</span>
<span class="fc" id="L332">			myWriter.write(currentIndent + &quot;&lt;/note&gt;&quot;);		</span>
<span class="fc" id="L333">			newLine();</span>
<span class="nc" id="L334">		} catch (IOException e) {</span>
<span class="nc" id="L335">			e.printStackTrace();</span>
<span class="fc" id="L336">		}</span>
		//}
<span class="fc" id="L338">	}</span>
	
	/**
	 * Adds a chord to the MusicXML
	 * @param chord
	 * @param noteType
	 */

	public void addChord(char[] chord, String noteType, int duration, int[] octaves,int[] string, int[] fret, int[] dot,boolean[] alter, int HamLocation, boolean hammerStart, boolean hammerContinue, boolean hammerDone,boolean[] harmonic) {
		//if(measureNum &gt;= 1) {
<span class="fc" id="L348">		boolean firstDone = false;</span>
<span class="fc bfc" id="L349" title="All 2 branches covered.">		for (int i = chord.length-1; i&gt;=0;i--) {</span>
<span class="pc bpc" id="L350" title="1 of 2 branches missed.">			if(string[i] != 0) {</span>
				try {	
<span class="fc" id="L352">					myWriter.write(currentIndent + &quot;&lt;note&gt;&quot;);</span>
<span class="fc" id="L353">					currentIndent += &quot;  &quot;;</span>
<span class="fc" id="L354">					newLine();</span>
<span class="fc bfc" id="L355" title="All 2 branches covered.">					if(firstDone) {</span>
<span class="fc" id="L356">						myWriter.write(currentIndent + &quot;&lt;chord/&gt;&quot;);</span>
<span class="fc" id="L357">						newLine();</span>
					}
<span class="fc" id="L359">					myWriter.write(currentIndent + &quot;&lt;pitch&gt;&quot;);</span>
<span class="fc" id="L360">					currentIndent += &quot;  &quot;;</span>
<span class="fc" id="L361">					newLine();</span>
<span class="fc" id="L362">					myWriter.write(currentIndent + &quot;&lt;step&gt;&quot; + chord[i] + &quot;&lt;/step&gt;&quot;);</span>
<span class="fc" id="L363">					newLine();</span>
<span class="pc bpc" id="L364" title="1 of 2 branches missed.">					if (alter[i]) {</span>
<span class="nc" id="L365">						myWriter.write(currentIndent + &quot;&lt;alter&gt;&quot; + 1 + &quot;&lt;/alter&gt;&quot;);</span>
<span class="nc" id="L366">						newLine();</span>
					}
<span class="fc" id="L368">					myWriter.write(currentIndent + &quot;&lt;octave&gt;&quot; + octaves[i]+ &quot;&lt;/octave&gt;&quot;);</span>
<span class="fc" id="L369">					newLine();</span>
<span class="fc" id="L370">					myWriter.write(currentIndent + &quot;&lt;/pitch&gt;&quot;); </span>
<span class="fc" id="L371">					newLine();</span>
<span class="fc" id="L372">					tabBack();</span>
<span class="fc" id="L373">					myWriter.write(currentIndent + &quot;&lt;duration&gt;&quot; + duration + &quot;&lt;/duration&gt;&quot;); </span>
<span class="fc" id="L374">					newLine();</span>
<span class="fc" id="L375">					myWriter.write(currentIndent + &quot;&lt;type&gt;&quot; + noteType +&quot;&lt;/type&gt;&quot;); </span>
<span class="fc" id="L376">					newLine();</span>
<span class="fc bfc" id="L377" title="All 2 branches covered.">					for(int j  = 0; j &lt; dot[i]; j++) {</span>
<span class="fc" id="L378">						myWriter.write(currentIndent + &quot;&lt;dot/&gt;&quot;);</span>
<span class="fc" id="L379">						newLine();</span>
					}
<span class="pc bpc" id="L381" title="1 of 2 branches missed.">					if(alter[i]){</span>
<span class="nc" id="L382">						myWriter.write(currentIndent + &quot;&lt;accidental&gt;sharp&lt;/accidental&gt;&quot;);</span>
<span class="nc" id="L383">						newLine();</span>
					}
<span class="fc" id="L385">					myWriter.write(currentIndent + &quot;&lt;notations&gt;&quot;);</span>
<span class="fc" id="L386">					newLine();</span>
<span class="fc" id="L387">					currentIndent += &quot;  &quot;;</span>
<span class="fc" id="L388">					myWriter.write(currentIndent + &quot;&lt;technical&gt;&quot;);</span>
<span class="fc" id="L389">					currentIndent += &quot;  &quot;;</span>
<span class="fc" id="L390">					newLine();</span>
<span class="pc bpc" id="L391" title="1 of 2 branches missed.">					if(harmonic[i]) {</span>
<span class="nc" id="L392">						myWriter.write(currentIndent + &quot;&lt;harmonic default-x=\&quot;3\&quot; default-y=\&quot;24\&quot; placement=\&quot;above\&quot; print-object=\&quot;yes\&quot;/&gt;&quot;);</span>
<span class="nc" id="L393">						newLine();</span>
					}
<span class="pc bpc" id="L395" title="3 of 4 branches missed.">					if(i == HamLocation &amp;&amp;hammerStart){</span>
<span class="nc" id="L396">						myWriter.write(currentIndent + &quot;&lt;hammer-on number=\&quot;1\&quot; type=\&quot;start\&quot;&gt;H&lt;/hammer-on&gt;&quot;);</span>
<span class="nc" id="L397">						newLine();</span>
					}
<span class="pc bpc" id="L399" title="3 of 4 branches missed.">					else if(i == HamLocation &amp;&amp; hammerContinue){</span>
<span class="nc" id="L400">						myWriter.write(currentIndent + &quot;&lt;hammer-on number=\&quot;1\&quot; type=\&quot;stop\&quot;/&gt;&quot;);</span>
<span class="nc" id="L401">						newLine();</span>
<span class="nc" id="L402">						myWriter.write(currentIndent + &quot;&lt;hammer-on number=\&quot;1\&quot; type=\&quot;start\&quot;&gt;H&lt;/hammer-on&gt;&quot;);</span>
<span class="nc" id="L403">						newLine();</span>
					}
<span class="pc bpc" id="L405" title="3 of 4 branches missed.">					else if(i == HamLocation &amp;&amp; hammerDone){</span>
<span class="nc" id="L406">						myWriter.write(currentIndent + &quot;&lt;hammer-on number=\&quot;1\&quot; type=\&quot;stop\&quot;/&gt;&quot;);</span>
<span class="nc" id="L407">						newLine();</span>
					}
<span class="fc" id="L409">					myWriter.write(currentIndent + &quot;&lt;string&gt;&quot; + string[i] + &quot;&lt;/string&gt;&quot;);</span>
<span class="fc" id="L410">					newLine();</span>
<span class="fc" id="L411">					myWriter.write(currentIndent + &quot;&lt;fret&gt;&quot; + fret[i] + &quot;&lt;/fret&gt;&quot;);</span>
<span class="fc" id="L412">					newLine();</span>
<span class="fc" id="L413">					tabBack();</span>
<span class="fc" id="L414">					myWriter.write(currentIndent + &quot;&lt;/technical&gt;&quot;);</span>
<span class="fc" id="L415">					newLine();</span>
<span class="fc" id="L416">					tabBack();</span>
<span class="fc" id="L417">					myWriter.write(currentIndent + &quot;&lt;/notations&gt;&quot;);</span>
<span class="fc" id="L418">					newLine();</span>
<span class="fc" id="L419">					myWriter.write(currentIndent + &quot;&lt;stem&gt;down&lt;/stem&gt;&quot;); </span>
<span class="fc" id="L420">					newLine();</span>
<span class="fc" id="L421">					myWriter.write(currentIndent + &quot;&lt;staff&gt;1&lt;/staff&gt;&quot;);</span>
<span class="fc" id="L422">					newLine();</span>
<span class="fc" id="L423">					tabBack();</span>
<span class="fc" id="L424">					myWriter.write(currentIndent + &quot;&lt;/note&gt;&quot;);		</span>
<span class="fc" id="L425">					newLine();</span>
<span class="nc" id="L426">					} catch (IOException e) {</span>
<span class="nc" id="L427">						e.printStackTrace();</span>
<span class="fc" id="L428">					}</span>
<span class="fc" id="L429">				firstDone = true;</span>
			}
		}
		//}
<span class="fc" id="L433">	}</span>
	
	public void addRest(int duration, String noteType) {
		try {
<span class="nc" id="L437">			myWriter.write(currentIndent + &quot;&lt;note&gt;&quot;);</span>
<span class="nc" id="L438">			currentIndent += &quot;  &quot;;</span>
<span class="nc" id="L439">			newLine();</span>
<span class="nc" id="L440">			myWriter.write(currentIndent + &quot;&lt;rest/&gt;&quot;);</span>
<span class="nc" id="L441">			newLine();</span>
<span class="nc" id="L442">			myWriter.write(currentIndent + &quot;&lt;duration&gt;&quot; + duration + &quot;&lt;/duration&gt;&quot;);</span>
<span class="nc" id="L443">			newLine();</span>
<span class="nc" id="L444">			myWriter.write(currentIndent + &quot;&lt;type&gt;&quot; + noteType + &quot;&lt;/type&gt;&quot;);</span>
<span class="nc" id="L445">			newLine();</span>
<span class="nc" id="L446">			tabBack();</span>
<span class="nc" id="L447">			myWriter.write(currentIndent + &quot;&lt;/note&gt;&quot;);</span>
<span class="nc" id="L448">			newLine();</span>
<span class="nc" id="L449">		}catch(IOException e) {</span>
<span class="nc" id="L450">			e.printStackTrace();</span>
<span class="nc" id="L451">		}</span>
<span class="nc" id="L452">	}</span>
	
	/**
	 * Adds a new measure opening to the MusicXML
	 * @param measureNumber
	 */
	public void openMeasure(int measureNumber)
	{
		try {
<span class="fc" id="L461">			myWriter.write(currentIndent + &quot;&lt;measure number=\&quot;&quot; + measureNumber + &quot;\&quot;&gt;&quot;);</span>
<span class="fc" id="L462">			currentIndent += &quot;  &quot;;</span>
<span class="fc" id="L463">			newLine();</span>
<span class="fc" id="L464">			measureOpen = true;</span>
			//measureNum = measureNumber;
<span class="nc" id="L466">		} catch (IOException e) {</span>
<span class="nc" id="L467">			e.printStackTrace();</span>
<span class="fc" id="L468">		}</span>
<span class="fc" id="L469">	}</span>
	
	/**
	 * Adds a measure closing to the MusicXML
	 */
	public void closeMeasure()
	{
		try {
<span class="fc" id="L477">			tabBack();</span>
<span class="fc" id="L478">			myWriter.write(currentIndent + &quot;&lt;/measure&gt;&quot;);</span>
<span class="fc" id="L479">			newLine();</span>
<span class="fc" id="L480">			measureOpen = false;</span>
<span class="nc" id="L481">		} catch (IOException e) {</span>
<span class="nc" id="L482">			e.printStackTrace();</span>
<span class="fc" id="L483">		}</span>
<span class="fc" id="L484">	}</span>
	
	/**
	 * Adds the closing lines to the MusicXML
	 */
	public void end()
	{
		try {
<span class="fc" id="L492">			myWriter.write(&quot;&lt;/score-partwise&gt;&quot;);			</span>
<span class="fc" id="L493">			myWriter.close();</span>
<span class="nc" id="L494">		} catch (IOException e) {</span>
<span class="nc" id="L495">			e.printStackTrace();</span>
<span class="fc" id="L496">		}</span>
<span class="fc" id="L497">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>